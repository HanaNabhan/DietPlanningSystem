:- use_module(library(pce)).
meal_list(breakfast, [
    grilled_toast, creamy_oats, baked_egg, crispy_bacon, fluffy_pancake, cheesy_omelet,
    herbed_quinoa, buttery_waffle, fried_bread, savory_muffin, zesty_sausage, tangy_avocado,
    roasted_nuts, caramelized_banana, honey_granola, spiced_cereal, flaky_pastry, soft_bagel,
    sweet_jamtoast, grilled_potato, fruity_yogurt, egg_burrito, tomato_toast, berry_oatmeal,
    scrambled_eggs, spicy_hash, garlic_toast, cinnamon_roll, cheesy_muffin, nutty_bar,
    apple_waffle, maple_pancake, peanut_buttertoast, fruit_cup, toasted_croissant, veggie_quiche,
    breakfast_wrap, boiled_eggs, herbed_veggies, creamy_mash, mint_porridge, cornflakes_milk,
    almond_toast, honey_bread, jam_roll, savory_croissant, baked_beans, tofu_scramble,
    avocado_sandwich, banana_toast, veggie_scramble, buttered_muffin, soft_tortilla,
    spinach_omelet, egg_mcmuffin, french_toast, cheesy_scones, glazed_bacon, poached_eggs,
    vanilla_yogurt, orange_muffin, chocolate_bagel, fruit_granola, stuffed_waffle, turkey_biscuit,
    cinnamon_bagel, berry_smoothie_bowl, green_omelet, healthy_bites, spicy_quinoa, sweet_tart,
    granola_parfait, pumpkin_pancake, beet_toast, basil_eggs, nutty_oats, cranberry_muffin,
    cornbread_slice, apple_muffin, butter_croissant, chocolate_oats, toast_bites, spinach_pancake,
    fruit_sandwich, cheddar_bagel, walnut_granola, berry_parfait, jammy_bun, lemon_waffle,
    sesame_toast, coconut_yogurt, apple_cereal, banana_porridge, healthy_scone, energy_bar
]).
meal_list(lunch, [
    roasted_chicken, spicy_rice, cheesy_wrap, grilled_vegetables, herbed_beef, glazed_fish,
    curry_noodles, garlic_shrimp, baked_potato, chicken_salad, savory_sandwich, tangy_tofu,
    steak_burger, creamy_pasta, lentil_soup, grilled_cheese, tuna_wrap, spicy_burrito,
    veggie_stew, turkey_club, smoky_hotdog, fried_chicken, stuffed_peppers, crunchy_tacos,
    basil_rice, tomato_pasta, chickpea_wrap, herbed_pizza, fish_fingers, stirfry_veggies,
    rice_bowl, chicken_wrap, smoky_beans, thai_noodles, sweet_potato, curry_chickpeas,
    veggie_pizza, grilled_fish, lemon_rice, blackbean_burger, cucumber_sandwich, spicy_toast,
    teriyaki_chicken, quinoa_bowl, tofu_burger, spinach_rice, corn_wrap, ham_sandwich,
    pesto_pasta, potato_soup, grilled_lamb, beef_wrap, crispy_nuggets, garlic_chicken,
    taco_salad, sesame_noodles, buttered_fish, spicy_dumplings, veggie_kebab, chicken_ravioli,
    lentil_wrap, greek_salad, roasted_tofu, chickpea_salad, hummus_wrap, veggie_pita,
    cheesy_couscous, crispy_onions, tomato_soup, crunchy_wrap, spicy_falafel, mashed_chicken,
    spinach_wrap, spicy_potatoes, ginger_veggies, bbq_pulledpork, pasta_salad, turkey_roll,
    egg_saladwrap, stuffed_pita, roasted_eggplant, kimchi_rice, tahini_wrap, garden_pasta,
    cabbage_roll, creamy_soup, basil_chicken, tofu_rice, miso_noodles, spicy_sandwich,
    mushroom_wrap, italian_meatballs, cauliflower_rice, onion_ringwrap, broccoli_pasta,
    teriyaki_steak, veggie_noodles, lemon_chicken, herbed_wrap, stuffed_roll, sweet_curry
]).
meal_list(dinner, [
    steamed_fish, buttery_pasta, glazed_beef, tangy_stew, grilled_lamb, creamy_soup,
    baked_salmon, spicy_pilaf, herbed_chicken, tomato_noodles, garlic_steak, roasted_veggies,
    curry_lentils, rice_meatballs, pepper_pasta, lemon_tofu, chili_concarne, beef_stew,
    seared_tuna, fried_rice, baked_lasagna, tofu_soup, ginger_chicken, stuffed_chicken,
    garlic_mash, soy_noodles, creamy_risotto, pasta_meatballs, cheesy_gnocchi, honey_roast,
    veggie_chili, mashed_veggies, fish_curry, lamb_korma, chicken_kebabs, sesame_chicken,
    eggplant_parm, spinach_ravioli, bbq_ribs, coconut_rice, mushroom_soup, italian_pasta,
    squash_casserole, braised_beef, spicy_tagine, onion_soup, slowcooked_chicken, curry_rice,
    shrimp_scampi, cheesy_bake, teriyaki_salmon, roasted_mushrooms, paprika_steak,
    spicy_lasagna, tangy_beef, almond_chicken, baked_meatloaf, fried_toast, tomato_risotto,
    veggie_satay, miso_stew, rice_rolls, creamy_casserole, sweet_glaze, savory_gravy,
    mushroom_risotto, lemon_herbchicken, fish_fry, butter_paneer, chickpea_curry, spinach_bake,
    onion_gratin, tofu_katsu, caramelized_squash, grilled_kebab, pesto_ravioli, bbq_tofu,
    stuffed_eggplant, pepper_beef, coconut_chicken, cabbage_curry, sweet_ribs, garlic_veggies,
    chili_tofu, ginger_soup, herbed_scallops, lemon_salmon, tamarind_chicken, rice_tagine,
    roasted_chickpeas, spicy_prawns, braised_lamb, slowcooked_beans, grilled_steak,
    cranberry_chicken, grilled_eggplant, potato_galette, chimichurri_beef, baked_polenta
]).
meal_list(drinks, [
    mango_juice, mint_tea, chocolate_milk, berry_smoothie, vanilla_shake, coconut_water,
    lemon_soda, peach_tea, orange_juice, apple_cider, raspberry_smoothie, grape_juice,
    banana_shake, cocoa_milk, iced_coffee, green_tea, hibiscus_juice, ginger_lemonade,
    pineapple_juice, kiwi_smoothie, strawberry_milk, blueberry_smoothie, cherry_tea,
    almond_milk, carrot_juice, sparkling_water, lychee_juice, hazelnut_milk, cinnamon_tea,
    lime_soda, peach_lemonade, passionfruit_juice, herbal_tea, watermelon_smoothie,
    turmeric_latte, cold_brew, chocolate_shake, soy_milk, vanilla_almond, oat_milk,
    mocha_coffee, lemon_coconut, berry_cider, iced_matcha, pear_juice, cranberry_soda,
    beet_juice, golden_milk, citrus_fizz, honey_lemonade, cinnamon_cocoa, orange_fizz,
    bubble_tea, guava_juice, kiwi_lemonade, tropical_punch, mojito_sparkle, milk_tea,
    pomegranate_juice, banana_milk, sweet_lassi, cucumber_water, spiced_chai, creamy_coffee,
    cocoa_shake, berry_mojito, espresso_shot, iced_latte, lemon_mint, caramel_milk,
    pumpkin_latte, raspberry_cider, date_shake, mint_choco, ginger_ale, vanilla_latte,
    root_beer, hazelnut_latte, iced_espresso, almond_tea, fruit_juice, papaya_shake,
    chocolate_cider, sweet_tea, thai_icedtea, green_juice, orange_smoothie, creamy_latte,
    cold_latte, tangy_lassi, fruit_punch, detox_water, spicy_mint, honey_tea,
    rose_milk, avocado_shake, matcha_latte, apple_sparkle, coconut_tea
]).
avoid_meals_for_diabetes(breakfast, [
    grilled_toast, fried_bread, fluffy_pancake, buttery_waffle, sweet_jamtoast,
    cinnamon_roll, cheesy_muffin, apple_waffle, maple_pancake, peanut_buttertoast,
    toasted_croissant, cornflakes_milk, honey_bread, jam_roll, banana_toast,
    buttered_muffin, french_toast, glazed_bacon, orange_muffin, chocolate_bagel,
    stuffed_waffle, cinnamon_bagel, sweet_tart, pumpkin_pancake, cranberry_muffin,
    apple_muffin, butter_croissant, chocolate_oats, spinach_pancake, cheddar_bagel,
    jammy_bun, lemon_waffle, apple_cereal, banana_porridge, energy_bar
]).

avoid_meals_for_diabetes(lunch, [
    fried_chicken, cheesy_wrap, creamy_pasta, grilled_cheese, spicy_burrito,
    steak_burger, sweet_potato, spicy_potatoes, pesto_pasta, potato_soup,
    crispy_nuggets, buttered_fish, spicy_dumplings, cheesy_couscous, crispy_onions,
    italian_meatballs, onion_ringwrap, teriyaki_steak, spicy_sandwich, sweet_curry
]).

avoid_meals_for_diabetes(dinner, [
    buttery_pasta, glazed_beef, creamy_soup, spicy_pilaf, fried_rice,
    baked_lasagna, garlic_mash, creamy_risotto, pasta_meatballs, cheesy_gnocchi,
    honey_roast, mashed_veggies, bbq_ribs, coconut_rice, sweet_glaze,
    mushroom_risotto, fish_fry, butter_paneer, sweet_ribs, chimichurri_beef
]).

avoid_meals_for_diabetes(drinks, [
    mango_juice, chocolate_milk, berry_smoothie, vanilla_shake, lemon_soda,
    orange_juice, apple_cider, grape_juice, banana_shake, cocoa_milk,
    raspberry_smoothie, strawberry_milk, pineapple_juice, kiwi_smoothie,
    blueberry_smoothie, carrot_juice, lychee_juice, caramel_milk, pear_juice,
    cranberry_soda, beet_juice, citrus_fizz, honey_lemonade, orange_fizz,
    bubble_tea, pomegranate_juice, banana_milk, sweet_lassi, milk_tea,
    cocoa_shake, berry_mojito, creamy_coffee, pumpkin_latte, raspberry_cider,
    date_shake, mint_choco, vanilla_latte, root_beer, hazelnut_latte,
    chocolate_cider, sweet_tea, thai_icedtea, creamy_latte, cold_latte,
    fruit_juice, papaya_shake, avocado_shake
]).
avoid_meals_for_cholesterol(breakfast, [
    crispy_bacon, cheesy_omelet, buttery_waffle, fried_bread, savory_muffin,
    zesty_sausage, sweet_jamtoast, grilled_potato, cinnamon_roll, cheesy_muffin,
    maple_pancake, peanut_buttertoast, toasted_croissant, buttered_muffin,
    egg_mcmuffin, french_toast, cheesy_scones, glazed_bacon, chocolate_bagel,
    stuffed_waffle, turkey_biscuit, cinnamon_bagel, chocolate_oats, cheddar_bagel,
    walnut_granola, butter_croissant, jammy_bun, sesame_toast, banana_porridge,
    healthy_scone, energy_bar
]).

avoid_meals_for_cholesterol(lunch, [
    roasted_chicken, herbed_beef, glazed_fish, garlic_shrimp, chicken_salad,
    steak_burger, grilled_cheese, fried_chicken, fish_fingers, grilled_fish,
    blackbean_burger, teriyaki_chicken, tofu_burger, ham_sandwich, grilled_lamb,
    beef_wrap, crispy_nuggets, garlic_chicken, buttered_fish, spicy_dumplings,
    chicken_ravioli, turkey_roll, egg_saladwrap, creamy_soup, basil_chicken,
    tofu_rice, spicy_sandwich, italian_meatballs, broccoli_pasta,
    teriyaki_steak, lemon_chicken
]).

avoid_meals_for_cholesterol(dinner, [
    buttery_pasta, glazed_beef, grilled_lamb, creamy_soup, baked_salmon,
    herbed_chicken, garlic_steak, beef_stew, seared_tuna, fried_rice,
    baked_lasagna, stuffed_chicken, garlic_mash, pasta_meatballs,
    cheesy_gnocchi, honey_roast, fish_curry, lamb_korma, chicken_kebabs,
    sesame_chicken, bbq_ribs, braised_beef, spicy_tagine, slowcooked_chicken,
    shrimp_scampi, cheesy_bake, teriyaki_salmon, paprika_steak, tangy_beef,
    almond_chicken, baked_meatloaf, mushroom_risotto, lemon_herbchicken,
    fish_fry, butter_paneer, grilled_kebab, bbq_tofu, coconut_chicken,
    chili_tofu, herbed_scallops, lemon_salmon, tamarind_chicken, spicy_prawns,
    braised_lamb, grilled_steak, cranberry_chicken, chimichurri_beef
]).

avoid_meals_for_cholesterol(drinks, [
    chocolate_milk, vanilla_shake, banana_shake, cocoa_milk, strawberry_milk,
    blueberry_smoothie, almond_milk, hazelnut_milk, caramel_milk, banana_milk,
    creamy_coffee, cocoa_shake, vanilla_latte, root_beer, hazelnut_latte,
    iced_espresso, chocolate_cider, sweet_tea, creamy_latte, cold_latte,
    honey_tea, rose_milk, matcha_latte
]).
avoid_list_for_heart_disease(breakfast, [
    crispy_bacon, buttery_waffle, fried_bread, cheesy_omelet, spiced_cereal, soft_bagel,
    sweet_jamtoast, cinnamon_roll, cheesy_muffin, maple_pancake, peanut_buttertoast,
    toasted_croissant, buttered_muffin, chocolate_bagel, glazed_bacon, vanilla_yogurt,
    chocolate_oats, butter_croissant, cheddar_bagel, jammy_bun, cinnamon_bagel, lemon_waffle,
    sesame_toast, energy_bar
]).

avoid_list_for_heart_disease(lunch, [
    fried_chicken, steak_burger, crispy_nuggets, buttered_fish, cheesy_couscous,
    spicy_dumplings, bbq_pulledpork, creamy_pasta, ham_sandwich, garlic_chicken,
    italian_meatballs, beef_wrap, teriyaki_chicken, sweet_curry, spicy_falafel, mashed_chicken
]).

avoid_list_for_heart_disease(dinner, [
    glazed_beef, garlic_steak, creamy_soup, baked_lasagna, cheesy_gnocchi, beef_stew,
    chili_concarne, creamy_risotto, pasta_meatballs, sesame_chicken, bbq_ribs, onion_soup,
    creamy_casserole, sweet_glaze, mushroom_risotto, fried_toast, baked_meatloaf, garlic_mash,
    pepper_beef, coconut_chicken, sweet_ribs, chimichurri_beef
]).

avoid_list_for_heart_disease(drinks, [
    chocolate_milk, vanilla_shake, banana_shake, cocoa_milk, caramel_milk, chocolate_shake,
    sweet_lassi, creamy_coffee, cocoa_shake, pumpkin_latte, raspberry_cider, root_beer,
    hazelnut_latte, iced_espresso, chocolate_cider, sweet_tea, creamy_latte, cold_latte,
    tangy_lassi, spicy_mint, rose_milk, avocado_shake, matcha_latte, apple_sparkle
]).
avoid_meals_for_gluten_allergy(breakfast, [
    grilled_toast, fluffy_pancake, buttery_waffle, fried_bread, savory_muffin,
    sweet_jamtoast, grilled_potato, spiced_cereal, flaky_pastry, soft_bagel,
    toast_bites, cinnamon_roll, cheesy_muffin, nutty_bar, apple_waffle,
    maple_pancake, peanut_buttertoast, toasted_croissant, breakfast_wrap,
    soft_tortilla, egg_mcmuffin, french_toast, cheesy_scones, chocolate_bagel,
    stuffed_waffle, turkey_biscuit, cinnamon_bagel, sweet_tart, pumpkin_pancake,
    cornbread_slice, apple_muffin, butter_croissant, chocolate_oats,
    cheddar_bagel, jammy_bun, lemon_waffle, sesame_toast, apple_cereal,
    banana_porridge, healthy_scone, energy_bar
]).

avoid_meals_for_gluten_allergy(lunch, [
    spicy_rice, cheesy_wrap, curry_noodles, garlic_shrimp, baked_potato,
    savory_sandwich, steak_burger, creamy_pasta, grilled_cheese, tuna_wrap,
    spicy_burrito, turkey_club, fried_chicken, stuffed_peppers, crunchy_tacos,
    tomato_pasta, chickpea_wrap, herbed_pizza, fish_fingers, stirfry_veggies,
    rice_bowl, chicken_wrap, thai_noodles, veggie_pizza, grilled_fish,
    lemon_rice, blackbean_burger, cucumber_sandwich, spicy_toast,
    teriyaki_chicken, quinoa_bowl, tofu_burger, spinach_rice, corn_wrap,
    ham_sandwich, pesto_pasta, potato_soup, grilled_lamb, beef_wrap,
    crispy_nuggets, garlic_chicken, taco_salad, sesame_noodles, buttered_fish,
    spicy_dumplings, veggie_kebab, chicken_ravioli, lentil_wrap, hummus_wrap,
    veggie_pita, cheesy_couscous, crunchy_wrap, mashed_chicken, spinach_wrap,
    spicy_potatoes, bbq_pulledpork, pasta_salad, turkey_roll, egg_saladwrap,
    stuffed_pita, creamy_soup, basil_chicken, tofu_rice, miso_noodles,
    spicy_sandwich, mushroom_wrap, italian_meatballs, cauliflower_rice,
    onion_ringwrap, broccoli_pasta, teriyaki_steak, veggie_noodles,
    lemon_chicken, herbed_wrap, stuffed_roll, sweet_curry
]).

avoid_meals_for_gluten_allergy(dinner, [
    buttery_pasta, glazed_beef, tomato_noodles, garlic_steak, pasta_meatballs,
    cheesy_gnocchi, baked_lasagna, creamy_risotto, pepper_pasta, garlic_mash,
    soy_noodles, honey_roast, veggie_chili, fish_curry, lamb_korma,
    chicken_kebabs, sesame_chicken, eggplant_parm, spinach_ravioli, bbq_ribs,
    coconut_rice, italian_pasta, squash_casserole, braised_beef, spicy_tagine,
    onion_soup, curry_rice, cheesy_bake, teriyaki_salmon, paprika_steak,
    baked_meatloaf, tomato_risotto, mushroom_risotto, lemon_herbchicken,
    fish_fry, butter_paneer, spinach_bake, tofu_katsu, stuffed_eggplant,
    coconut_chicken, cabbage_curry, garlic_veggies, chili_tofu, rice_tagine,
    roasted_chickpeas, grilled_steak, cranberry_chicken, potato_galette,
    chimichurri_beef, baked_polenta
]).

avoid_meals_for_gluten_allergy(drinks, [
    chocolate_milk, barley-based_drinks, malt_beverages, chocolate_shake,
    cocoa_milk, root_beer , sweet_tea ,
    chocolate_cider, vanilla_shake , caramel_milk,
    oat_milk , flavored_milk_teas
]).
avoid_list_for_nut_allergy(breakfast, [
    roasted_nuts, nutty_bar, peanut_buttertoast, almond_toast,
    nutty_oats, walnut_granola, coconut_yogurt
]).

avoid_list_for_nut_allergy(lunch, [
    peanut_buttertoast  % assuming it was accidentally listed in breakfast only
]).

avoid_list_for_nut_allergy(dinner, [
    almond_chicken, coconut_chicken  % nut-based flavors
]).

avoid_list_for_nut_allergy(drinks, [
    almond_milk, hazelnut_milk, coconut_water, coconut_tea, vanilla_almond,
    rose_milk, banana_milk, avocado_shake
]).
avoid_list_for_lactose_intolerant(breakfast, [
    creamy_oats, buttery_waffle, fruity_yogurt, cornflakes_milk,
    buttered_muffin, vanilla_yogurt, butter_croissant, chocolate_oats,
    coconut_yogurt, cheddar_bagel
]).

avoid_list_for_lactose_intolerant(lunch, [
    creamy_pasta, grilled_cheese, buttered_fish, cheesy_couscous,
    cheese_wrap, pesto_pasta
]).

avoid_list_for_lactose_intolerant(dinner, [
    buttery_pasta, creamy_soup, creamy_risotto, cheesy_gnocchi, pasta_meatballs,
    cheesy_bake, creamy_casserole, mushroom_risotto, butter_paneer,gg
]).

avoid_list_for_lactose_intolerant(drinks, [
    chocolate_milk, vanilla_shake, banana_shake, cocoa_milk, caramel_milk,
    chocolate_shake, sweet_lassi, creamy_coffee, cocoa_shake, pumpkin_latte,
    raspberry_cider, root_beer, hazelnut_latte, iced_espresso, chocolate_cider,
    sweet_tea, creamy_latte, cold_latte, tangy_lassi, rose_milk, avocado_shake,
    matcha_latte, milk_tea, banana_milk, vanilla_almond, golden_milk
]).
fitness(breakfast, [
    herbed_quinoa, baked_egg, fruity_yogurt, avocado_sandwich, scrambled_eggs,
    spinach_omelet, boiled_eggs, herbed_veggies, almond_toast, veggie_scramble,
    banana_toast, healthy_bites, spicy_quinoa, granola_parfait, beet_toast,
    basil_eggs, nutty_oats, coconut_yogurt, banana_porridge, energy_bar
]).

fitness(lunch, [
    roasted_chicken, grilled_fish, quinoa_bowl, tofu_burger, spinach_rice,
    greek_salad, roasted_tofu, chickpea_salad, hummus_wrap, veggie_pita,
    tomato_soup, spicy_falafel, mashed_chicken, spinach_wrap, ginger_veggies,
    garden_pasta, cabbage_roll, tofu_rice, mushroom_wrap, cauliflower_rice,
    broccoli_pasta, veggie_noodles, herbed_wrap
]).

fitness(dinner, [
    steamed_fish, grilled_lamb, herbed_chicken, roasted_veggies, curry_lentils,
    lemon_tofu, garlic_mash, veggie_chili, mashed_veggies, chickpea_curry,
    spinach_bake, caramelized_squash, grilled_kebab, stuffed_eggplant,
    cabbage_curry, garlic_veggies, roasted_chickpeas, grilled_eggplant,
    potato_galette
]).

fitness(drinks, [
    mango_juice, mint_tea, berry_smoothie, coconut_water, green_tea,gg,
    ginger_lemonade, pineapple_juice, almond_milk, carrot_juice, sparkling_water,
    cinnamon_tea, peach_lemonade, herbal_tea, watermelon_smoothie,
    turmeric_latte, soy_milk, vanilla_almond, oat_milk, pear_juice,
    cucumber_water, golden_milk, detox_water, honey_tea, rose_milk,
    green_juice, avocado_shake, matcha_latte
]).
lose_weight(breakfast, [
    grilled_toast, herbed_quinoa, tomato_toast, boiled_eggs, veggie_quiche, spinach_omelet,
    avocado_sandwich, banana_toast, veggie_scramble, fruit_cup, beet_toast, green_omelet,
    healthy_bites, spicy_quinoa, nutty_oats, healthy_scone, energy_bar
]).

lose_weight(lunch, [
    grilled_vegetables, lentil_soup, veggie_stew, chickpea_wrap, stirfry_veggies, rice_bowl,
    quinoa_bowl, tofu_burger, spinach_rice, grilled_fish, tomato_soup, veggie_kebab,
    hummus_wrap, veggie_pita, chickpea_salad, spinach_wrap, spicy_potatoes, ginger_veggies,
    kimchi_rice, garden_pasta, tofu_rice, cauliflower_rice, broccoli_pasta, veggie_noodles,
    sweet_curry
]).

lose_weight(dinner, [
    steamed_fish, tangy_stew, herbed_chicken, roasted_veggies, curry_lentils, lemon_tofu,
    veggie_chili, mashed_veggies, coconut_rice, squash_casserole, spicy_tagine,
    roasted_mushrooms, veggie_satay, miso_stew, chickpea_curry, spinach_bake, tofu_katsu,
    grilled_kebab, stuffed_eggplant, cabbage_curry, chili_tofu, garlic_veggies, ginger_soup,
    roasted_chickpeas, slowcooked_beans, grilled_eggplant, baked_polenta
]).

lose_weight(drinks, [
    mint_tea, coconut_water, herbal_tea, green_tea, hibiscus_juice, carrot_juice,
    sparkling_water, lemon_soda, cold_brew, ginger_lemonade, turmeric_latte, oat_milk,
    pear_juice, beet_juice, detox_water, cucumber_water, green_juice, apple_sparkle
]).

healthy_habits(breakfast, [
    creamy_oats, herbed_quinoa, fruit_cup, berry_oatmeal, banana_porridge, spinach_omelet,
    veggie_quiche, breakfast_wrap, banana_toast, avocado_sandwich, energy_bar, healthy_scone,
    green_omelet, nutty_oats, healthy_bites, granola_parfait
]).

healthy_habits(lunch, [
    grilled_vegetables, lentil_soup, chickpea_wrap, veggie_pita, quinoa_bowl, tofu_burger,
    tofu_rice, hummus_wrap, chickpea_salad, spinach_rice, veggie_kebab, tomato_soup,
    garden_pasta, kimchi_rice, veggie_noodles, cauliflower_rice, greek_salad
]).

healthy_habits(dinner, [
    miso_noodles, spinach_wrap, ginger_veggies, basil_rice, curry_chickpeas, sweet_potato,
    mushroom_wrap, broccoli_pasta, steamed_fish, herbed_chicken, coconut_rice, curry_lentils,
    tofu_soup, veggie_chili, mashed_veggies, grilled_veggies, miso_stew, spinach_bake,
    lemon_tofu, chickpea_curry, tofu_katsu, grilled_kebab, garlic_veggies, ginger_soup,
    lemon_salmon, roasted_chickpeas, baked_polenta
]).

healthy_habits(drinks, [
    fruit_juice, green_tea, mint_tea, herbal_tea, ginger_lemonade, oat_milk, turmeric_latte,
    cucumber_water, detox_water, coconut_water, kiwi_smoothie, green_juice, pear_juice,
    hibiscus_juice, carrot_juice, apple_sparkle
]).
% Male must avoid
avoid_male_items(breakfast, [
    chocolate_bagel, cinnamon_roll, glazed_bacon, peanut_buttertoast,
    creamy_oats, honey_bread, jammy_bun, banana_milk, soft_bagel
]).

avoid_male_items(lunch, [
    steak_burger, fried_chicken, cheesy_wrap, creamy_pasta,
    bbq_pulledpork, cheesy_couscous, spicy_dumplings
]).

avoid_male_items(dinner, [
    glazed_beef, creamy_risotto, spicy_tagine, bbq_ribs,
    creamy_casserole, fried_toast, sweet_ribs
]).

avoid_male_items(drinks, [
    chocolate_milk, sweet_lassi, caramel_milk,
    vanilla_latte, coconut_tea, cocoa_milk
]).

% Female must avoid
avoid_female_items(breakfast, [
    crispy_bacon, zesty_sausage, cheesy_omelet, buttery_waffle,
    maple_pancake, fried_bread, nutty_bar, cinnamon_bagel
]).

avoid_female_items(lunch, [
    fried_chicken, spicy_burrito, steak_burger, curry_noodles,
    spicy_dumplings, bbq_pulledpork, beef_wrap, spicy_hotdog
]).

avoid_female_items(dinner, [
    glazed_beef, chili_concarne, bbq_ribs, spicy_lasagna,
    tangy_stew, chimichurri_beef, fish_fry, sweet_glaze
]).

avoid_female_items(drinks, [
    chocolate_shake, pumpkin_latte, cocoa_shake, mint_choco,
    root_beer, sweet_tea, bubble_tea, iced_espresso
]).
avoid_list_for_teen(breakfast, [
    grilled_toast, creamy_oats, fluffy_pancake, cheesy_omelet, herbed_quinoa, buttery_waffle,
    fried_bread, savory_muffin, zesty_sausage, caramelized_banana, honey_granola, berry_oatmeal,
    scrambled_eggs, egg_burrito, maple_pancake, peanut_buttertoast, apple_waffle, veggie_quiche,
    egg_mcmuffin, french_toast, orange_muffin, chocolate_bagel, berry_smoothie_bowl, granola_parfait,
    pumpkin_pancake, beet_toast, apple_muffin, cinnamon_bagel, lemon_waffle, healthy_bites, energy_bar
]).

avoid_list_for_teen(lunch, [
    roasted_chicken, cheesy_wrap, grilled_vegetables, garlic_shrimp, baked_potato, chicken_salad,
    savory_sandwich, steak_burger, creamy_pasta, grilled_cheese, spicy_burrito, veggie_stew, turkey_club,
    fried_chicken, smoky_hotdog, stuffed_peppers, crunchy_tacos, rice_bowl, chicken_wrap, veggie_pizza,
    grilled_fish, blackbean_burger, cucumber_sandwich, spicy_toast, quinoa_bowl, pesto_pasta, mashed_chicken,
    spicy_potatoes, pasta_salad, egg_saladwrap, roasted_eggplant, creamy_soup, basil_chicken
]).

avoid_list_for_teen(dinner, [
    buttery_pasta, glazed_beef, tangy_stew, grilled_lamb, baked_salmon, spicy_pilaf, herbed_chicken,
    tomato_noodles, garlic_steak, roasted_veggies, curry_lentils, rice_meatballs, pepper_pasta, lemon_tofu,
    chili_concarne, beef_stew, fried_rice, baked_lasagna, tofu_soup, ginger_chicken, stuffed_chicken,
    garlic_mash, creamy_risotto, pasta_meatballs, cheesy_gnocchi, veggie_chili, mashed_veggies, fish_curry,
    lamb_korma, bbq_ribs, mushroom_soup, italian_pasta, squash_casserole, spicy_tagine, slowcooked_chicken,
    shrimp_scampi, cheesy_bake, teriyaki_salmon
]).

avoid_list_for_teen(drinks, [
    mango_juice, chocolate_milk, berry_smoothie, vanilla_shake, coconut_water, lemon_soda, peach_tea,
    orange_juice, raspberry_smoothie, grape_juice, banana_shake, iced_coffee, green_tea, hibiscus_juice,
    ginger_lemonade, pineapple_juice, kiwi_smoothie, strawberry_milk, blueberry_smoothie, almond_milk,
    carrot_juice, sparkling_water, lychee_juice, cinnamon_tea, lime_soda, peach_lemonade, passionfruit_juice,
    herbal_tea, watermelon_smoothie, cold_brew, chocolate_shake, soy_milk, vanilla_almond, oat_milk
]).

avoid_list_for_young_adult(breakfast, [
    grilled_toast, creamy_oats, baked_egg, crispy_bacon, fluffy_pancake, cheesy_omelet, herbed_quinoa,
    buttery_waffle, fried_bread, savory_muffin, zesty_sausage, caramelized_banana, honey_granola,
    berry_oatmeal, scrambled_eggs, spicy_hash, garlic_toast, cinnamon_roll, cheesy_muffin, nutty_bar,
    apple_waffle, maple_pancake, peanut_buttertoast, fruit_cup, toasted_croissant, veggie_quiche,
    breakfast_wrap, boiled_eggs, herbed_veggies, creamy_mash, mint_porridge, cornflakes_milk
]).

avoid_list_for_young_adult(lunch, [
    roasted_chicken, spicy_rice, cheesy_wrap, grilled_vegetables, herbed_beef, glazed_fish, curry_noodles,
    garlic_shrimp, baked_potato, chicken_salad, savory_sandwich, tangy_tofu, steak_burger, creamy_pasta,
    lentil_soup, grilled_cheese, tuna_wrap, spicy_burrito, veggie_stew, turkey_club, smoky_hotdog,
    fried_chicken, stuffed_peppers, crunchy_tacos, basil_rice, tomato_pasta, chickpea_wrap, herbed_pizza,
    fish_fingers, stirfry_veggies, rice_bowl, chicken_wrap, smoky_beans, thai_noodles, sweet_potato,
    curry_chickpeas, veggie_pizza, grilled_fish, lemon_rice, blackbean_burger, cucumber_sandwich, spicy_toast
]).

avoid_list_for_young_adult(dinner, [
    steamed_fish, buttery_pasta, glazed_beef, tangy_stew, grilled_lamb, creamy_soup, baked_salmon,
    spicy_pilaf, herbed_chicken, tomato_noodles, garlic_steak, roasted_veggies, curry_lentils, rice_meatballs,
    pepper_pasta, lemon_tofu, chili_concarne, beef_stew, seared_tuna, fried_rice, baked_lasagna, tofu_soup,
    ginger_chicken, stuffed_chicken, garlic_mash, soy_noodles, creamy_risotto, pasta_meatballs, cheesy_gnocchi,
    honey_roast, veggie_chili, mashed_veggies, fish_curry, lamb_korma, chicken_kebabs, sesame_chicken
]).

avoid_list_for_young_adult(drinks, [
    mango_juice, chocolate_milk, berry_smoothie, vanilla_shake, coconut_water, lemon_soda, peach_tea,
    orange_juice, raspberry_smoothie, grape_juice, banana_shake, cocoa_milk, iced_coffee, green_tea,
    hibiscus_juice, ginger_lemonade, pineapple_juice, kiwi_smoothie, strawberry_milk, blueberry_smoothie,
    cherry_tea, almond_milk, carrot_juice, sparkling_water, lychee_juice, hazelnut_milk, cinnamon_tea,
    lime_soda, peach_lemonade, passionfruit_juice, herbal_tea, watermelon_smoothie, turmeric_latte,
    cold_brew, chocolate_shake, soy_milk, vanilla_almond, oat_milk, mocha_coffee, lemon_coconut
]).

avoid_list_for_adult(breakfast, [
    grilled_toast, creamy_oats, baked_egg, crispy_bacon, fluffy_pancake, cheesy_omelet, herbed_quinoa,
    buttery_waffle, fried_bread, savory_muffin, zesty_sausage, tangy_avocado, roasted_nuts, caramelized_banana,
    honey_granola, spiced_cereal, flaky_pastry, soft_bagel, sweet_jamtoast, grilled_potato, fruity_yogurt,
    egg_burrito, tomato_toast, berry_oatmeal, scrambled_eggs, spicy_hash, garlic_toast, cinnamon_roll
]).

avoid_list_for_adult(lunch, [
    roasted_chicken, spicy_rice, cheesy_wrap, grilled_vegetables, herbed_beef, glazed_fish, curry_noodles,
    garlic_shrimp, baked_potato, chicken_salad, savory_sandwich, tangy_tofu, steak_burger, creamy_pasta,
    lentil_soup, grilled_cheese, tuna_wrap, spicy_burrito, veggie_stew, turkey_club, smoky_hotdog,
    fried_chicken, stuffed_peppers, crunchy_tacos, basil_rice, tomato_pasta, chickpea_wrap, herbed_pizza,
    fish_fingers, stirfry_veggies, rice_bowl, chicken_wrap, smoky_beans, thai_noodles, sweet_potato
]).

avoid_list_for_adult(dinner, [
    steamed_fish, buttery_pasta, glazed_beef, tangy_stew, grilled_lamb, creamy_soup, baked_salmon,
    spicy_pilaf, herbed_chicken, tomato_noodles, garlic_steak, roasted_veggies, curry_lentils, rice_meatballs,
    pepper_pasta, lemon_tofu, chili_concarne, beef_stew, seared_tuna, fried_rice, baked_lasagna, tofu_soup,
    ginger_chicken, stuffed_chicken, garlic_mash, soy_noodles, creamy_risotto, pasta_meatballs, cheesy_gnocchi
]).

avoid_list_for_adult(drinks, [
    mango_juice, mint_tea, chocolate_milk, berry_smoothie, vanilla_shake, coconut_water, lemon_soda,
    peach_tea, orange_juice, apple_cider, raspberry_smoothie, grape_juice, banana_shake, iced_coffee,
    green_tea, hibiscus_juice, ginger_lemonade, pineapple_juice, kiwi_smoothie, strawberry_milk,
    blueberry_smoothie, cherry_tea, almond_milk, carrot_juice, sparkling_water, lychee_juice, hazelnut_milk,
    cinnamon_tea, lime_soda, peach_lemonade, passionfruit_juice, herbal_tea, watermelon_smoothie
]).

avoid_list_for_senior(breakfast, [
    grilled_toast, creamy_oats, baked_egg, crispy_bacon, fluffy_pancake, cheesy_omelet, herbed_quinoa,
    buttery_waffle, fried_bread, savory_muffin, zesty_sausage, tangy_avocado, caramelized_banana,
    honey_granola, spiced_cereal, flaky_pastry, soft_bagel, sweet_jamtoast, grilled_potato, fruity_yogurt,
    scrambled_eggs, garlic_toast, cinnamon_roll, peanut_buttertoast, fruit_cup, vanilla_yogurt, egg_burrito
]).

avoid_list_for_senior(lunch, [
    roasted_chicken, spicy_rice, grilled_vegetables, garlic_shrimp, baked_potato, chicken_salad,
    savory_sandwich, tangy_tofu, creamy_pasta, grilled_cheese, veggie_stew, turkey_club, fried_chicken,
    stuffed_peppers, crunchy_tacos, basil_rice, tomato_pasta, rice_bowl, chicken_wrap, veggie_pizza,
    grilled_fish, cucumber_sandwich, cauliflower_bake, creamy_rice, fish_fingers, stirfry_veggies
]).

avoid_list_for_senior(dinner, [
    steamed_fish, buttery_pasta, glazed_beef, tangy_stew, grilled_lamb, creamy_soup, baked_salmon,
    spicy_pilaf, herbed_chicken, roasted_veggies, curry_lentils, rice_meatballs, pepper_pasta, lemon_tofu,
    chili_concarne, beef_stew, seared_tuna, fried_rice, baked_lasagna, tofu_soup, ginger_chicken,
    stuffed_chicken, garlic_mash, creamy_risotto, pasta_meatballs, cheesy_gnocchi, mashed_veggies
]).

avoid_list_for_senior(drinks, [
    mango_juice, berry_smoothie, coconut_water, lemon_soda, peach_tea, orange_juice, raspberry_smoothie,
    grape_juice, banana_shake, iced_coffee, green_tea, hibiscus_juice, ginger_lemonade, pineapple_juice,
    kiwi_smoothie, strawberry_milk, blueberry_smoothie, almond_milk, carrot_juice, sparkling_water,
    lychee_juice, chamomile_tea, cinnamon_tea, lime_soda, passionfruit_juice, herbal_tea, watermelon_smoothie
]).
map_age(less_than_18,teen).
map_age(from_19_to_30,young_adult).
map_age(from_31_to_50,adult).
map_age(more_than_50,senior).
%rule to check element in list or not
my_member(X, [X|_]).
my_member(X, [_|T]) :-
    my_member(X, T).

% Subtract common items from two lists
subtract_common([], _, []).
subtract_common([H|T], L2, Result) :-
    my_member(H, L2),
    subtract_common(T, L2, Result).
subtract_common([H|T], L2, [H|Result]) :-
    \+ my_member(H, L2),
    subtract_common(T, L2, Result).
%get common items between two lists
get_common([], _, []).
get_common([H|T], L2, [H|Result]) :-
    my_member(H, L2),
    get_common(T, L2, Result).
get_common([H|T], L2, Result) :-
    \+ my_member(H, L2),
    get_common(T, L2, Result).

% Helper to format lists into lines of N items
format_list_in_lines([], _, []).
format_list_in_lines(List, N, [Line|RestLines]) :-
    take_n(List, N, Chunk, Remaining),
    maplist(atom_string, Chunk, Strs),
    atomic_list_concat(Strs, ', ', Line),
    format_list_in_lines(Remaining, N, RestLines).

% Helper to take N items from a list and return the rest
take_n(List, 0, [], List) :- !.
take_n([], _, [], []).
take_n([H|T], N, [H|Taken], Rest) :-
    N > 0,
    N1 is N - 1,
    take_n(T, N1, Taken, Rest).

% Filter gender rule
filter_gender(male, X, Y, Z, K) :-
    meal_list(drinks, C),
    avoid_male_items(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_male_items(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_male_items(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_male_items(dinner, E),
    subtract_common(D, E, Z).
filter_gender(female, X, Y, Z, K) :-
    meal_list(drinks, C),
    avoid_female_items(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_female_items(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_female_items(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_female_items(dinner, E),
    subtract_common(D, E, Z).
%filter disease Rule
filter_disease(diabetes,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_meals_for_diabetes(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_meals_for_diabetes(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_meals_for_diabetes(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_meals_for_diabetes(dinner, E),
    subtract_common(D, E, Z).
filter_disease(cholesterol,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_meals_for_cholesterol(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_meals_for_cholesterol(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_meals_for_cholesterol(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_meals_for_cholesterol(dinner, E),
    subtract_common(D, E, Z).
filter_disease(heart_disease,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_heart_disease(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_heart_disease(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_heart_disease(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_heart_disease(dinner, E),
    subtract_common(D, E, Z).

filter_disease(none,X,Y,Z,K):-
    meal_list(drinks, K),
    meal_list(breakfast, X),
    meal_list(lunch, Y),
    meal_list(dinner, Z).

%filtering allergy rule
filter_allergy(gluten_allergy,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_meals_for_gluten_allergy(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_meals_for_gluten_allergy(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_meals_for_gluten_allergy(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_meals_for_gluten_allergy(dinner, E),
    subtract_common(D, E, Z).

filter_allergy(nut_allergy,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_nut_allergy(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_nut_allergy(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_nut_allergy(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_nut_allergy(dinner, E),
    subtract_common(D, E, Z).

filter_allergy(lactose_intolerant,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_lactose_intolerant(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_lactose_intolerant(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_lactose_intolerant(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_lactose_intolerant(dinner, E),
    subtract_common(D, E, Z).
filter_allergy(none,X,Y,Z,K):-
    meal_list(drinks, K),
    meal_list(breakfast, X),
    meal_list(lunch, Y),
    meal_list(dinner, Z).
%filter age Rule
filter_age(teen,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_teen(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_teen(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_teen(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_teen(dinner, E),
    subtract_common(D, E, Z).

filter_age(young_adult,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_young_adult(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_young_adult(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_young_adult(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_young_adult(dinner, E),
    subtract_common(D, E, Z).

filter_age(young_adult,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_young_adult(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_young_adult(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_young_adult(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_young_adult(dinner, E),
    subtract_common(D, E, Z).
filter_age(adult,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_adult(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_adult(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_adult(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_adult(dinner, E),
    subtract_common(D, E, Z).

filter_age(senior,X,Y,Z,K):-
    meal_list(drinks, C),
    avoid_list_for_senior(drinks, L),
    subtract_common(C, L, K),

    meal_list(breakfast, M),
    avoid_list_for_senior(breakfast, N),
    subtract_common(M, N, X),

    meal_list(lunch, B),
    avoid_list_for_senior(lunch, A),
    subtract_common(B, A, Y),

    meal_list(dinner, D),
    avoid_list_for_senior(dinner, E),
    subtract_common(D, E, Z).
get_Goal(to_be_fit,X,Y,Z,K):-
    meal_list(drinks, C),
    fitness(drinks, L),
    get_common(C, L, K),

    meal_list(breakfast, M),
    fitness(breakfast, N),
    get_common(M, N, X),

    meal_list(lunch, B),
    fitness(lunch, A),
    get_common(B, A, Y),

    meal_list(dinner, D),
    fitness(dinner, E),
    get_common(D, E, Z).
get_Goal(healthy_habits,X,Y,Z,K):-
    meal_list(drinks, C),
    healthy_habits(drinks, L),
    get_common(C, L, K),

    meal_list(breakfast, M),
    healthy_habits(breakfast, N),
    get_common(M, N, X),

    meal_list(lunch, B),
    healthy_habits(lunch, A),
    get_common(B, A, Y),

    meal_list(dinner, D),
    healthy_habits(dinner, E),
    get_common(D, E, Z).
get_Goal(lose_weight,X,Y,Z,K):-
    meal_list(drinks, C),
    lose_weight(drinks, L),
    get_common(C, L, K),

    meal_list(breakfast, M),
    lose_weight(breakfast, N),
    get_common(M, N, X),

    meal_list(lunch, B),
    lose_weight(lunch, A),
    get_common(B, A, Y),

    meal_list(dinner, D),
    lose_weight(dinner, E),
    get_common(D, E, Z).
get_final_list(A1,A2,A3,A4,A5,Res):-
             get_common(A1,A2,A6),
             get_common(A3,A4,A7),
             get_common(A6,A7,A8),
             get_common(A5,A8,Res).


start_gui:-
    new(Dialog, dialog('Diet planning system!')),
    % Set dialog aesthetics
    send(Dialog, size, size(990,700)),
    send(Dialog, background, colour(lightgray)),
    % Greeting label
    send(Dialog, append, new(Greeting, label(greeting, '                         Diet Planning System'))),
    send(Greeting, font, font('Helvetica Neue', bold, 50)),
    send(Greeting, alignment, center),
    send(Greeting, colour, colour(darkgreen)),
    send(Dialog, gap, size(0, 20)),
   


    % Instructional label
    send(Dialog, append, new(Instruction, label(instruction, '                                 Please select the below fields:'))),
    send(Instruction, font, font('Helvetica Neue', normal, 14)),
    send(Instruction, alignment, center),
    send(Instruction, colour, colour(brown)),
     % Increase vertical space after instruction
      % Grid for user preferences without labels
    new(PrefGrid, dialog_group('Preferences', group)),
    send(Dialog, append, PrefGrid),
    send(PrefGrid, append,label(space, '              ')),

    new(Age, menu(age, cycle)),

    send_list(Age, append, [less_than_18,from_19_to_30,from_31_to_50,more_than_50]),
        send(PrefGrid, append, Age, right),


    new(Gender, menu(gender, cycle)),
    send_list(Gender, append, [male,female]),
    send(PrefGrid, append, Gender, right),


    new(Chronic_Disease, menu(disease, cycle)),
    send_list(Chronic_Disease, append, [diabetes,heart_disease,cholesterol,none]),
    send(PrefGrid, append, Chronic_Disease, right),


    new(Allergies, menu(allegries, cycle)),
    send_list(Allergies, append, [gluten_allergy, nut_allergy, lactose_intolerant, none]),
    send(PrefGrid, append, Allergies, right),


    new(PrimaryG, menu(primary_goal, cycle)),
    send_list(PrimaryG, append, [to_be_fit,lose_weight,healthy_habits]),
    send(PrefGrid, append, PrimaryG, right),

    % Button to trigger recommendation
    new(Bu, dialog_group('bu', group)),
    send(Dialog, append, Bu),
    send(Bu, append,label(space, '                                                                                                                                                                                                                                                                                                                           ')),

    send(Bu,append, new(Recommend_Button, button('Get Diet Plan',
    message(@prolog, recommend_gui, Age?selection, Gender?selection,  Chronic_Disease?selection, Allergies?selection,PrimaryG?selection ,Dialog)))),

    send(Recommend_Button, colour, colour(black)),
    send(Recommend_Button, font, font('Helvetica Neue', bold, 12)),
    send(Recommend_Button, width, 150),

    % Field to display result

    new(Result_Label, label(result, 'Your recommendation will appear here.')),
    send(Result_Label, font, font('Helvetica Neue', bold, 18)),
    send(Result_Label, alignment, center),
    send(Result_Label, colour, colour(black)),
    send(Dialog, append, Result_Label),
    % Display the window
    send(Dialog, open).
recommend_gui(Age, Gender, Chronic_Disease, Allergies, PrimaryG, Dialog) :-
    map_age(Age, OutputAge),
    find_diet(OutputAge, Gender, Chronic_Disease, Allergies, PrimaryG, Breakfast, Lunch, Dinner, ValidDrinks),
    !,
    % Format each list into lines of 5 items
    format_list_in_lines(Breakfast, 5, BLines),
    format_list_in_lines(Lunch, 5, LLines),
    format_list_in_lines(Dinner, 5, DnLines),
    format_list_in_lines(ValidDrinks, 5, DkLines),

    % Combine formatted lines into block strings
    atomic_list_concat(BLines, '\n', BText),
    atomic_list_concat(LLines, '\n', LText),
    atomic_list_concat(DnLines, '\n', DnText),
    atomic_list_concat(DkLines, '\n', DkText),

    % Final output
    format(atom(Message),
           'Recommended Diet Plan:\n\nBreakfast:\n~w\n\nLunch:\n~w\n\nDinner:\n~w\n\nDrinks:\n~w',
           [BText, LText, DnText, DkText]),

    get(Dialog, member, result, Result_Label),
    send(Result_Label, selection, Message),
    send(Result_Label, alignment, center),
    send(Result_Label, font, font('Helvetica Neue', bold, 14)),
    send(Result_Label, colour, colour(black)).


% if No Matching diet found in database
recommend_gui(AgeInput, Gender, Chronic_Disease, Allergies, PrimaryG, Dialog) :-
    map_age(AgeInput, Age),
    format(atom(DebugMsg),
           'No matching diet found for:\nAge: ~w\nGender: ~w\nDisease: ~w\nAllergy: ~w\nGoal: ~w',
           [Age, Gender, Chronic_Disease, Allergies, PrimaryG]),
    writeln(DebugMsg),
    get(Dialog, member, result, Result_Label),
    send(Result_Label, selection, 'Sorry, no suitable diet found for your preferences.'),
    send(Result_Label, colour, colour(white)).

% Check for facts
 find_diet(Age, Gender, Chronic, Allergy, Goal, Breakfast, Lunch, Dinner, ValidDrinks) :-
    filter_age(Age,B1,L1,D1,Dr1),
    filter_allergy(Allergy,B2,L2,D2,Dr2),
    filter_gender(Gender,B3,L3,D3,Dr3),
    filter_disease(Chronic,B4,L4,D4,Dr4),
    get_Goal(Goal,B5,L5,D5,Dr5),
    get_final_list(B1,B2,B3,B4,B5,Breakfast),
    get_final_list(L1,L2,L3,L4,L5,Lunch),
    get_final_list(D1,D2,D3,D4,D5,Dinner),
    get_final_list(Dr1,Dr2,Dr3,Dr4,Dr5,ValidDrinks).


% Start the program
:- start_gui.









